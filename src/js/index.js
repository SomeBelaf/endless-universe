const originalArr = [
  "*",
  ".",
  "+",
  "°",
  //   "\u0359",
  "\u2219",
  "\u02DF",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  " ",
  //   "\u030A",
  //   "'",
  //   "\u0308",
  //   "\u0738",
  //   "\u0739",
  //   "\u07ED",
  //   "\u003A",
];
const test_1 = [
  "#1_______________________________________________#",
  "#2_______________________________________________#",
  "#3_______________________________________________#",
  "#4_______________________________________________#",
  "#5_______________________________________________#",
  "#6_______________________________________________#",
  "#7_______________________________________________#",
  "#8_______________________________________________#",
  "#9_______________________________________________#",
  "#10______________________________________________#",
];

const star_1 = [
  "              '                        ",
  "        +                              ",
  "                *       '              ",
  "          *                            ",
  "                                       ",
  "                  .           .        ",
  "                              ;        ",
  "          *               - --+- -     ",
  "                              !        ",
  "      +                     .          ",
  "           *           .               ",
  "                                       ",
  "                       *      .        ",
  "                                  +    ",
  "                     °                 ",
  "         °                             ",
  ".                .                     ",
  "                 .                     ",
  "                 :      .           *  ",
  "                 !           .         ",
  "     *           |        .            ",
  "                 |_         +          ",
  "              ,  | `.                  ",
  "-  -- --- --+-&lt;#&gt;-+- ---  --  -  ",
  "              `._|_,'                  ",
  "                 T                     ",
  "                 |                 +   ",
  "   +             !                     ",
  "                 :         .           ",
  "        .        .       *             ",
];
const star_2 = [
  "      .' .--.    +     .             ° ",
  "     *  * _                            ",
  "     *._:##:.-.     .            .     ",
  "   .    ':##   *          °            ",
  "            *  *                    .  ",
  "        '--* .'      .      +          ",
];

const star_3 = [
  "       *      .           .' .--.    .  ",
  "  +                  .    *  * _         ",
  "      .                  *._:##:.-.     ",
  "                *           ':##   *    ",
  " .        °                     *  *    ",
  "                            '--* .'     ",
];
const star_4 = [
  " °       :     °          .             ",
  "     .   :   .                    °     ",
  "       . : .       +                  . ",
  "   - - -*.* - - -              .        ",
  "       .*:*.      .             +       ",
  "     .   :   +             *            ",
  "         :          .                 * ",
  "  .      :                      *       ",
];
const star_5 = [
  "         .    :          :        .     ",
  "*                      . : .          * ",
  "   *       *        --- *.* ---         ",
  "                       .*:*.            ",
  "     .         .         :       *   .  ",
];

const planet_1 = [
  "       +                                ",
  "                                         ",
  "                 *       +               ",
  "           '                  |          ",
  '       ()    .-.,="``"=.    - o -        ',
  "             '=/_       &#92     |       ",
  "          *   |  '=._    |               ",
  "               &#92     `=./`,        '  ",
  "            .   '=.__.=' `='      *      ",
  "   +                         +           ",
  "        O      *        '       .        ",
];
const planet_2 = [
  "   °           .          .--.   .   .  ",
  "                     ____'#   '____     ",
  "     .              '=============='  + ",
  "             .         . '.__.'  .   .  ",
];
const planet_3 = [
  "   *            .======.                ",
  "    .         .=\\_   _/~=.   *         ",
  "              =~~~\\_/~~~~=      .      ",
  "        .    |:~~~~~~_/\\_:|       .    ",
  " +            =_/\\_ |_   =             ",
  "              '=   \\~~\\_='   .     °  ",
  "          .     '======'                ",
];
const planet_4 = [
  "     ______     °           .          ",
  "  .=~~~~~~~~=.                         ",
  " .===()=======.     .            °     ",
  " =~~~~~~~~~~~~=                    .   ",
  " ==============                        ",
  " '=~~~~~~~~~~='           *            ",
  "   '-.____.-'    .     +          .    ",
];
const planet_5 = [
  "  .#******#.    .      +             .   ",
  ".##~~~~~~~~##.                           ",
  "##~~~~~~~~~~##                           ",
  "#~~~~~~~~~~~~#                           ",
  "##~~~~~~~~~~##       °                 * ",
  "'##~~~~~~~~##'                  +        ",
  "  '########' *            *            * ",
];
const planet_6 = [
  "     *   .           .     .#****#.  * ",
  "                         .##~~~~~~##.  ",
  "       .    *      *     #~~~~~~~~~~#  ",
  " *            .         .#~~~~~~~~~~#  ",
  "                         '##~~~~~~##   ",
  "       .                   '######'  * ",
];
const planet_7 = [
  "  .     *           ___   .          *  ",
  "                  .=   =.               ",
  "        .    .    = o : =  .            ",
  "  .               '=___='         *     ",
];
const planet_8 = [
  "    ___   .          *   .            * ",
  "  .=   =.        *     . .              ",
  "  = o : =  .                            ",
  "  '=___='           :      .      *   . ",
];
const planet_9 = [
  "  .                             ___   . ",
  "               *        :     .=   =.   ",
  "        .    .                = o : =   ",
  "                              '=___='   ",
];
// --- Создание обертки для контента --- //
function createWrapper(id) {
  let wrapper = document.createElement("article");
  wrapper.setAttribute("class", "wrapper");
  wrapper.setAttribute("id", `wrapper_${id}`);
  document
    .getElementsByTagName("body")[0]
    .insertAdjacentElement("afterbegin", wrapper);
  return wrapper;
}
// --- Создание контейнера для контента --- //
function createContainer(wrapper) {
  let container = document.createElement("pre");
  container.setAttribute("class", "container");
  container.setAttribute("id", "container");
  wrapper.insertAdjacentElement("afterbegin", container);
  return container;
}
function createTestContainer(wrapper) {
  let container = document.createElement("div");
  container.setAttribute("class", "test");
  wrapper.insertAdjacentElement("afterbegin", container);
  return container;
}
// Записать текущую обертку
let currentWrapper = createWrapper(1);
// Записать текущий контейнер
let currentContainer = createContainer(currentWrapper);
createTestContainer(currentWrapper);
console.log(currentWrapper);
console.log(currentContainer);
//  Получить ширину и высоту необходимого контента
const width = window.innerWidth * 3;
const height = window.innerHeight * 3;

// console.log("width", width);
// console.log("height", height);
// Количество символов в одной строке (5.5 ширина одного символа)
const line = Math.floor(width / 5.5);
// Количество строк на екране (11 высота одного символа)
const numOfLines = Math.floor(height / 11);
// console.log("line", line);
// console.log("numOfLines", numOfLines);

// --- Функция для получения рандомного символа с масива --- //
function getRandomStar(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}
// --- Функция для определения должен ли быть отрисовать элемент --- //
function shoudDrawElem() {
  let shoudDraw = false;
  const chance = Math.floor(Math.random() * 10);
  if (chance == 1) {
    shoudDraw = true;
  }
  return shoudDraw;
}
// --- Функция для заполнения контейнера контентом --- //
function drawStars() {
  let arrOfStars = [];
  let j = 0;
  while (j <= numOfLines) {
    // заполнить все строки
    for (let i = 0; i < line; i++) {
      // заполнить одну строку
      arrOfStars.push(getRandomStar(originalArr));
    }
    arrOfStars.push("\n");
    j++;
  }
  return arrOfStars;
}
// --- Функция для полечений позиции элемента по Y --- //
function getYPos() {
  return Math.floor(Math.random() * height);
}
// --- Функция для полечений позиции элемента по X --- //
function getXPos() {
  return Math.floor(Math.random() * width);
}
// --- Функция для отрисрвки элемента в случийним месте --- //
function drawElem(data, container) {
  let elem = null;
  if (shoudDrawElem()) {
    elem = document.createElement("pre");
    elem.setAttribute("class", "element");
    elem.setAttribute("style", `top: ${getYPos()}px; left: ${getXPos()}px`);
    elem.innerHTML = data.join("\n");
    container.insertAdjacentElement("beforeend", elem);
  }
}

let stars = drawStars();

currentContainer.innerHTML += stars.join("");

drawElem(star_1, currentContainer);
drawElem(star_2, currentContainer);
drawElem(star_3, currentContainer);
drawElem(star_4, currentContainer);
drawElem(star_5, currentContainer);
drawElem(planet_1, currentContainer);
drawElem(planet_2, currentContainer);
drawElem(planet_3, currentContainer);
drawElem(planet_4, currentContainer);
drawElem(planet_5, currentContainer);
drawElem(planet_6, currentContainer);
drawElem(planet_7, currentContainer);
drawElem(planet_8, currentContainer);
drawElem(planet_9, currentContainer);

function drawCanvas(x, y) {
  let previousX = null;
  let previousY = null;
  return function () {
    if (x !== previousX || y !== previousY) {
      if (y === "top" && x === "right") {
        console.log("top", "right");
      } else if (y === "top" && x === "left") {
        console.log("top", "left");
      } else if (y === "bottom" && x === "right") {
        console.log("bottom", "right");
      } else if (y === "bottom" && x === "left") {
        console.log("bottom", "left");
      }
    }
    previousX = x;
    previousY = y;
  };
}
// Класс для перемещения элемента (принимает элемент)
class DragElement {
  constructor(elem) {
    this.elem = elem;
    this.elemPosX = 0; // elem pos X
    this.elemPosY = 0; // elem pos Y
    this.cursorPosX = 0; // cursor X
    this.cursorPosY = 0; // cursor Y
    this.directionX = undefined;
    this.directionY = undefined;
  }
  init() {
    this.elem.onmousedown = (e) => this.dragMouseDown(e);
  }
  dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // получить старвовую позиция курсора
    this.cursorPosX = e.clientX;
    this.cursorPosY = e.clientY;
    document.onmouseup = this.closeDragElement;
    // вызвать функция когда курсор двигается
    document.onmousemove = (e) => {
      this.elementDrag(e);
    };
  }
  // метод для перемещения элемета
  elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // определить новую позицию курсора
    this.elemPosX = this.cursorPosX - e.clientX;
    this.elemPosY = this.cursorPosY - e.clientY;
    this.cursorPosX = e.clientX;
    this.cursorPosY = e.clientY;
    // установить новую позиция для элемента
    this.elem.style.top = this.elem.offsetTop - this.elemPosY + "px";
    this.elem.style.left = this.elem.offsetLeft - this.elemPosX + "px";
  }
  // прекратить движение когда кнопка мыши отпущена
  closeDragElement() {
    document.onmouseup = null;
    document.onmousemove = null;
  }
  //  получить направление движения пользователя
  getDirection(e) {
    e.preventDefault();
    if (this.elemPosX < 0) {
      this.directionX = "left";
    }
    if (this.elemPosX > 0) {
      this.directionX = "rigth";
    }
    if (this.elemPosY < 0) {
      this.directionY = "top";
    }
    if (this.elemPosY > 0) {
      this.directionY = "bottom";
    }
    return [this.directionX, this.directionY];
  }
}

const draggableWrapper = new DragElement(currentWrapper);
// console.log(draggableWrapper);
draggableWrapper.init();
draggableWrapper.elem.onmousemove = (e) => {
  e.preventDefault();
  const [directionX, directionY] = draggableWrapper.getDirection(e);
  if (directionX !== undefined && directionY !== undefined) {
    drawCanvas(directionX, directionY);
  }
};

// var Visible = function (target) {
//   // Все позиции элемента
//   var targetPosition = {
//       top: window.pageYOffset + target.getBoundingClientRect().top,
//       left: window.pageXOffset + target.getBoundingClientRect().left,
//       right: window.pageXOffset + target.getBoundingClientRect().right,
//       bottom: window.pageYOffset + target.getBoundingClientRect().bottom,
//     },
//     // Получаем позиции окна
//     windowPosition = {
//       top: window.pageYOffset,
//       left: window.pageXOffset,
//       right: window.pageXOffset + document.documentElement.clientWidth,
//       bottom: window.pageYOffset + document.documentElement.clientHeight,
//     };

//   if (targetPosition.bottom > windowPosition.top) {
//     // Если позиция нижней части элемента больше позиции верхней чайти окна, то элемент виден сверху
//     // Если элемент полностью видно, то запускаем следующий код
//     console.clear();
//     console.log(windowPosition.bottom);
//     console.log(targetPosition.top);
//     console.log("Вы видите элемент top :)");
//   } else if (targetPosition.top < windowPosition.bottom) {
//     // Если позиция верхней части элемента меньше позиции нижней чайти окна, то элемент виден снизу
//     console.clear();
//     console.log("Вы видите элемент bottom :)");
//   } else if (targetPosition.right > windowPosition.left) {
//     // Если позиция правой стороны элемента больше позиции левой части окна, то элемент виден слева
//     console.clear();
//     console.log("Вы видите элемент left :)");
//   } else if (targetPosition.left < windowPosition.right) {
//     // Если позиция левой стороны элемента меньше позиции правой чайти окна, то элемент виден справа
//     console.clear();
//     console.log("Вы видите элемент right :)");
//   } else {
//     // Если элемент не видно, то запускаем этот код
//     console.clear();
//   }
// };
// document.getElementById("mydiv").addEventListener("mousedown", function () {
//   Visible(document.getElementById("mydiv"));
// });

// // Запускаем функцию при прокрутке страницы

// // А также запустим функцию сразу. А то вдруг, элемент изначально видно
// Visible(document.getElementById("mydiv"));
